"use strict";(self.webpackChunkfcb_site=self.webpackChunkfcb_site||[]).push([[26],{9026:function(e,a,n){n.r(a),n.d(a,{default:function(){return y}});var t=n(4165),r=n(1413),s=n(5861),i=n(885),l=n(2791),o=n(4450),c=n(1313),d=n(8287),h=n(7674),u=n(184),m=function(e){var a=e.id,n=e.image,t=e.name,r=e.onChange;return(0,u.jsxs)("div",{className:"gallery-photo",children:[(0,u.jsx)("div",{className:"gallery-photo__container",children:(0,u.jsx)("img",{src:"".concat("https://barcelona-website.s3.eu-central-1.amazonaws.com","/").concat(n),alt:t})}),(0,u.jsx)("div",{id:a,"data-side":"left",className:"arrow arrow-left",onClick:r,children:(0,u.jsx)("span",{className:"fas fa-arrow-left"})}),(0,u.jsx)("div",{id:a,"data-side":"right",className:"arrow arrow-right",onClick:r,children:(0,u.jsx)("span",{className:"fas fa-arrow-right"})})]})},p=n(8609),x=n(3175),g=n(8023),v=n(9816),f=function(e){var a=e.auth,n=(e.hideModal,(0,d.x)()),r=n.isLoading,o=(n.error,n.sendRequest),m=(n.clearError,(0,v.c)({name:{value:"",isValid:!1},image:{value:"",isValid:!1}},!1)),f=(0,i.Z)(m,2),j=f[0],w=f[1],y=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,(r=new FormData).append("name",j.inputs.name.value),r.append("image",j.inputs.image.value[0]),e.next=7,o("".concat("https://barcelona-website-29be533385b9.herokuapp.com/api","/photos/"),"POST",r,{Authorization:"Bearer "+a.token});case 7:e.sent,window.location.reload(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a){return e.apply(this,arguments)}}();return(0,u.jsxs)(l.Fragment,{children:[r&&(0,u.jsx)("div",{children:(0,u.jsx)(h.Z,{asOverlay:!0})}),(0,u.jsxs)("form",{children:[(0,u.jsx)("div",{children:(0,u.jsx)(p.Z,{id:"name",element:"input",type:"text",label:"Name",validators:[(0,g.hg)()],errorText:"Please enter photo name.",onInput:w})}),(0,u.jsx)("div",{children:(0,u.jsx)(x.Z,{id:"image",onInput:w,errorText:"Please provide an image."})}),(0,u.jsx)("div",{children:(0,u.jsx)(c.Z,{type:"submit",disabled:!j.isValid,onClick:y,children:"ADD PHOTO"})})]})]})},j=n(5602),w=n(1665),y=function(){var e=(0,l.useContext)(w.V),a=(0,l.useState)([]),n=(0,i.Z)(a,2),p=n[0],x=n[1],g=(0,d.x)(),v=g.isLoading,y=(g.error,g.sendRequest),b=(g.clearError,(0,l.useState)(!1)),N=(0,i.Z)(b,2),_=N[0],Z=N[1],C=(0,l.useState)(!1),k=(0,i.Z)(C,2),E=k[0],D=k[1],I=(0,l.useState)(!1),T=(0,i.Z)(I,2),V=T[0],A=T[1],F=function(){Z(!1),D(!1)},O=function(e){e.target?D(!0):Z(!0)};(0,l.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,y("".concat("https://barcelona-website-29be533385b9.herokuapp.com/api","/photos"));case 4:e.sent.photos.forEach((function(e,n){var t=(0,r.Z)((0,r.Z)({},e),{},{index:n});a.push(t)})),x(a),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e(),setTimeout((function(){window.scrollTo(0,0)}),250)}),[y]);var P=p.map((function(e,a){return(0,u.jsxs)(o.E.div,{className:"gallery-element",onClick:function(){A(e),O(e)},initial:{opacity:0},whileInView:{opacity:1,transition:{duration:.5,delay:.2}},viewport:{once:!0},children:[(0,u.jsx)("div",{className:"gallery-element__image",children:(0,u.jsx)("img",{src:"".concat("https://barcelona-website.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.name})}),(0,u.jsx)("div",{className:"gallery-element__info",children:(0,u.jsxs)("div",{className:"gallery-element__bottom",children:[(0,u.jsxs)("div",{className:"gallery-element__bottom-author",children:[(0,u.jsx)("p",{children:"Author:"}),(0,u.jsx)("p",{children:e.author.nickname})]}),(0,u.jsx)("div",{className:"gallery-element__bottom-name",children:(0,u.jsx)("h3",{children:e.name})})]})})]},e.id)}));return(0,u.jsxs)(l.Fragment,{children:[(0,u.jsx)(j.Z,{className:"gallery-modal",show:_,onCancel:F,header:V&&V.name,headerClass:"gallery-modal__header",children:(0,u.jsx)(l.Fragment,{children:(0,u.jsx)(m,{id:V.index,image:V.image,name:V.name,onChange:function(e){if(p.length>1){var a,n=e.target.getAttribute("data-side"),t=parseInt(e.target.id);a="left"===n?0===t?p[p.length-1]:p[t-1]:t===p.length-1?p[0]:p[t+1],A(a)}}})}),contentClass:"gallery-content",footerClass:"gallery-footer"}),(0,u.jsx)(j.Z,{className:"gallery-modal",show:E,onCancel:F,header:"New Photo",headerClass:"gallery-modal__header",children:(0,u.jsx)(l.Fragment,{children:(0,u.jsx)(f,{auth:e,hideModal:F})}),contentClass:"gallery-content",footerClass:"gallery-footer"}),(0,u.jsxs)("div",{className:"gallery",children:[v&&(0,u.jsx)("div",{className:"center",children:(0,u.jsx)(h.Z,{asOverlay:!0})}),!v&&(0,u.jsxs)("div",{children:[(0,u.jsxs)(o.E.div,{className:"section-title__container",style:{position:"relative"},initial:{opacity:0},whileInView:{opacity:1,transition:{duration:.5,delay:.2}},viewport:{once:!0},children:[(0,u.jsx)("h1",{children:"Gallery"}),e.isLoggedIn&&(0,u.jsx)("div",{className:"section-title__container-button",children:(0,u.jsx)(c.Z,{onClick:O,children:"ADD NEW"})})]}),(0,u.jsx)("div",{className:"gallery-container",children:p.length>0&&P})]})]})]})}}}]);
//# sourceMappingURL=26.0a6dd463.chunk.js.map