"use strict";(self.webpackChunkfcb_site=self.webpackChunkfcb_site||[]).push([[705],{4705:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(885),r=n(2791),s=n(4165),i=n(5861),l=n(1313),c=n(1665),o=n(8287),u=n(7674),p=n(184),d=function(e){var t=e.id,n=e.name,a=e.title,d=e.price,m=e.images,x=e.image,v=e.comment,h=e.onDelete,j=e.request,f=(0,r.useContext)(c.V),g=(0,o.x)(),b=g.isLoading,y=(g.error,g.sendRequest),q=(g.clearError,function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("".concat("https://barcelona-website-29be533385b9.herokuapp.com/api","/").concat(j,"/").concat(t),"DELETE",null,{Authorization:"Bearer "+f.token});case 3:h(t),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}());return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)("li",{className:"item admin-content__container",children:[b&&(0,p.jsx)(u.Z,{asOverlay:!0}),(m||x)&&(0,p.jsx)("div",{className:"item-image",children:(0,p.jsx)("img",{src:"".concat("https://barcelona-website.s3.eu-central-1.amazonaws.com","/").concat("items"===j?m[0]:x),alt:n||"image"})}),n&&(0,p.jsx)("div",{children:(0,p.jsx)("h3",{children:n})}),a&&(0,p.jsx)("div",{children:(0,p.jsx)("h3",{children:a})}),v&&(0,p.jsx)("div",{children:(0,p.jsx)("h3",{children:v})}),d&&(0,p.jsx)("div",{children:(0,p.jsxs)("p",{children:[d," $"]})}),"news"===j&&t&&(0,p.jsx)("div",{children:(0,p.jsxs)("p",{children:["ID: ",t]})}),(0,p.jsx)("div",{className:"item-actions",children:(0,p.jsx)(l.Z,{inverse:!0,onClick:q,children:"Delete"})})]})})},m=function(e){var t=e.itemsList,n=e.onDelete,a=e.request,r=t.map((function(e){return(0,p.jsx)(d,{id:e.id,name:e.name,title:e.title,price:e.price,images:e.images,image:e.image,comment:e.comment,onDelete:n,request:a},e.id)}));return(0,p.jsx)("ul",{className:"items-list admin-content",children:r.length>=1?r:"You don't have any items yet"})},x=function(e){var t=(0,r.useState)(),n=(0,a.Z)(t,2),l=n[0],c=n[1],d=(0,o.x)(),x=d.isLoading,v=(d.error,d.sendRequest);d.clearError;(0,r.useEffect)((function(){var t=function(){var t=(0,i.Z)((0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v("".concat("https://barcelona-website-29be533385b9.herokuapp.com/api","/").concat(e.request));case 3:n=t.sent,c(n[e.request]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[v]);return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)("div",{className:"store",children:[x&&(0,p.jsx)("div",{className:"center",children:(0,p.jsx)(u.Z,{})}),!x&&l&&(0,p.jsx)(m,{itemsList:l,onDelete:function(e){c((function(t){return t.filter((function(t){return t.id!==e}))}))},request:e.request})]})})},v=n(2982),h=n(8023),j=n(8609),f=n(3175),g=n(9816),b=function(e){var t=(0,r.useContext)(c.V),n=(0,o.x)(),d=n.isLoading,m=(n.error,n.sendRequest),x=(n.clearError,(0,r.useState)([""])),b=(0,a.Z)(x,2),y=b[0],q=b[1],Z=(0,g.c)({name:{value:"",isValid:!1},price:{value:0,isValid:!1},type:{value:"",isValid:!1},description:{value:"",isValid:!1},images:{value:null,isValid:!1}},!1),w=(0,a.Z)(Z,3),T=w[0],N=w[1],k=(w[2],function(){var n=(0,i.Z)((0,s.Z)().mark((function n(a){var r,i;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),n.prev=1,r=new FormData,"news"===e.request?(r.append("title",T.inputs.name.value),y.forEach((function(e,t){r.append("articleTitles",T.inputs["newsTitle".concat(t)].value),r.append("articleDescriptions",T.inputs["newsDescription".concat(t)].value)})),r.append("image",T.inputs.images.value[0])):"items"===e.request?(r.append("price",T.inputs.price.value),r.append("type",T.inputs.type.value),r.append("description",T.inputs.description.value),r.append("name",T.inputs.name.value),T.inputs.images.value.forEach((function(e){return r.append("images",e)}))):"comments"===e.request||(r.append("name",T.inputs.name.value),r.append("image",T.inputs.images.value[0])),"players"===e.request&&(r.append("number",T.inputs.number.value),r.append("position",T.inputs.position.value),r.append("country",T.inputs.country.value),r.append("height",T.inputs.height.value),r.append("weight",T.inputs.weight.value),r.append("born",T.inputs.born.value),y.forEach((function(e,t){r.append("playerDescriptions",T.inputs["playerDescription".concat(t)].value)}))),i="".concat("https://barcelona-website-29be533385b9.herokuapp.com/api","/").concat(e.request),"comments"!==e.request){n.next=12;break}return i="".concat("https://barcelona-website-29be533385b9.herokuapp.com/api","/").concat(e.request,"/").concat(T.inputs.name.value),n.next=10,m(i,"POST",JSON.stringify({comment:T.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 10:n.next=14;break;case 12:return n.next=14,m(i,"POST",r,{Authorization:"Bearer "+t.token});case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[1,16]])})));return function(e){return n.apply(this,arguments)}}()),D=y.map((function(t,n){return"news"===e.request?(0,p.jsxs)("div",{className:"admin-form__news-inputs",children:[(0,p.jsx)(j.Z,{id:"newsTitle".concat(n),element:"input",type:"text",label:"Title",validators:[(0,h.hg)()],errorText:"Please enter a valid title.",onInput:N}),(0,p.jsx)(j.Z,{id:"newsDescription".concat(n),element:"textarea",label:"Description",validators:[(0,h.hg)()],errorText:"Please enter a description.",onInput:N})]},n):"players"===e.request?(0,p.jsx)("div",{className:"admin-form__players-inputs",children:(0,p.jsx)(j.Z,{id:"playerDescription".concat(n),element:"textarea",label:"Description",validators:[(0,h.hg)()],errorText:"Please enter a description.",onInput:N})},n):void 0}));return(0,p.jsxs)(r.Fragment,{children:[d&&(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,{asOverlay:!0})}),(0,p.jsxs)("form",{className:"admin-form",onSubmit:k,children:["comments"!==e.request&&(0,p.jsx)(j.Z,{id:"name",element:"input",type:"text",label:"Name",validators:[(0,h.hg)()],errorText:"Please enter a valid name.",onInput:N}),"comments"===e.request&&(0,p.jsx)(j.Z,{id:"name",element:"input",type:"text",label:"News Id",validators:[(0,h.hg)()],errorText:"Please enter a valid news id.",onInput:N}),"items"===e.request&&(0,p.jsx)(j.Z,{id:"type",element:"input",label:"Type",validators:[(0,h.hg)()],errorText:"Please enter a valid type.",onInput:N}),"items"===e.request&&(0,p.jsx)(j.Z,{id:"description",element:"textarea",label:"Description",validators:[(0,h.hg)(),(0,h.CP)(5)],errorText:"Please enter a description with minimum 5 letters.",onInput:N}),"comments"===e.request&&(0,p.jsx)(j.Z,{id:"description",element:"textarea",label:"Comment",validators:[(0,h.hg)()],errorText:"Please enter a comment.",onInput:N}),"items"===e.request&&(0,p.jsx)(j.Z,{id:"price",element:"input",type:"number",label:"Price",validators:[(0,h.hg)()],errorText:"Please enter a valid price.",onInput:N}),"comments"!==e.request&&(0,p.jsx)(f.Z,{id:"images",onInput:N,request:e.request,errorText:"Please provide an image."}),"players"===e.request&&(0,p.jsxs)("div",{className:"admin-form__team",children:[(0,p.jsxs)("div",{className:"admin-form__team-info",children:[(0,p.jsx)(j.Z,{id:"number",element:"input",type:"number",label:"Number",validators:[(0,h.hg)()],errorText:"Please enter a valid number.",onInput:N}),(0,p.jsx)(j.Z,{id:"height",element:"input",type:"number",label:"Height (cm)",validators:[(0,h.hg)()],errorText:"Please enter a valid height in cm.",onInput:N}),(0,p.jsx)(j.Z,{id:"weight",element:"input",type:"number",label:"Weight (cm)",validators:[(0,h.hg)()],errorText:"Please enter a valid weight in cm.",onInput:N})]}),(0,p.jsxs)("div",{className:"admin-form__team-info",children:[(0,p.jsx)(j.Z,{id:"position",element:"input",type:"text",label:"Position",validators:[(0,h.hg)()],errorText:"Please enter a valid position.",onInput:N}),(0,p.jsx)(j.Z,{id:"country",element:"input",type:"text",label:"Country",validators:[(0,h.hg)()],errorText:"Please enter a valid country.",onInput:N}),(0,p.jsx)(j.Z,{id:"born",element:"input",type:"date",label:"Born date",validators:[(0,h.hg)()],errorText:"Please enter a valid born date.",onInput:N})]})]}),("news"===e.request||"players"===e.request)&&D,("news"===e.request||"players"===e.request)&&(0,p.jsx)(l.Z,{type:"button",size:"small",inverse:!0,onClick:function(){q((function(e){return[].concat((0,v.Z)(e),[""])}))},children:"Add description"}),(0,p.jsx)("div",{className:"admin-form__submit-button",children:(0,p.jsx)(l.Z,{type:"submit",children:"ADD"})})]})]})},y=["store","gallery","news","team","comments"],q=function(){var e=(0,r.useState)(y.length),t=(0,a.Z)(e,2),n=t[0],s=t[1],i=(0,r.useState)(!1),l=(0,a.Z)(i,2),c=l[0],o=l[1],u=function(e){document.querySelectorAll("li.adminNavElement").forEach((function(e){return e.classList.remove("active")})),e.target.classList.contains("add")?o(!0):o(!1),e.target.classList.add("active"),s(parseInt(e.target.id))},d=y.map((function(e,t){return(0,p.jsxs)("div",{className:"admin-navigation",children:[(0,p.jsx)("h5",{children:e.toUpperCase()}),(0,p.jsx)("li",{id:t,className:"adminNavElement add",onClick:u,children:"ADD"}),(0,p.jsx)("li",{id:t,className:"adminNavElement delete",onClick:u,children:"DELETE"})]},t)}));return(0,p.jsx)("div",{className:"admin",children:(0,p.jsxs)("div",{className:"admin__container",children:[(0,p.jsx)("div",{className:"admin-navigation__container",children:d}),(0,p.jsxs)("div",{className:"admin-content",children:[c&&0===n&&(0,p.jsx)(b,{request:"items"}),!c&&0===n&&(0,p.jsx)(x,{request:"items"}),c&&1===n&&(0,p.jsx)(b,{request:"photos"}),!c&&1===n&&(0,p.jsx)(x,{request:"photos"}),c&&2===n&&(0,p.jsx)(b,{request:"news"}),!c&&2===n&&(0,p.jsx)(x,{request:"news"}),c&&3===n&&(0,p.jsx)(b,{request:"players"}),!c&&3===n&&(0,p.jsx)(x,{request:"players"}),c&&4===n&&(0,p.jsx)(b,{request:"comments"}),!c&&4===n&&(0,p.jsx)(x,{request:"comments"}),n===y.length&&(0,p.jsx)("p",{children:"SELECT FROM THE LEFT"})]})]})})}}}]);
//# sourceMappingURL=705.1adaf3e5.chunk.js.map